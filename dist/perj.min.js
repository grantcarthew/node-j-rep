!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Perj=t():e.Perj=t()}("undefined"==typeof self?this:self,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(t){return e[t]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e){e.exports=function(e,...t){function n(e,t){if(!(r++>i)){if(null==t)return t;const i=typeof t;if("string"==i||"number"==i||"boolean"==i)return t;if("object"==i||"function"==i){if(s.has(t))return"[Circular]";if(s.add(t),Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++)e[i]=n({},t[i]);return e}if(t instanceof Date)return t;if(t instanceof Error){for(const i of Reflect.ownKeys(t)){const r=n({},t[i]);void 0!==r&&(e[i]=r)}return void 0===e.message&&(e.message="The application has encountered an unknown error."),void 0===e.name&&(e.name="Error"),e}for(const i in t){const r=n({},t[i]);void 0!==r&&(e[i]=r)}return e}}}const i=2e3;let r;const s=new WeakSet;for(const s of t)r=0,n(e,s),r>i&&console.warn(`[Perj] Maximum of ${i} recursive calls has been reached.`);return e}},function(e,t,n){const i=n(2),r=n(0),s=Symbol("SplitOptions"),o=Symbol("Options"),l=Symbol("TopSnip"),u=Symbol("TopValues"),h=Symbol("TopIsPrimitive"),c=Symbol("HeaderStrings"),f=Symbol("HeaderValues"),a=Symbol("SetLevelHeader"),y=Symbol("SetLevelFunction");e.exports=class{constructor(e){if(null!=e&&e.constructor!==Object)throw new Error("Provide options object to create a logger.");for(const t in this[o]=Object.assign({},i),this[l]="",this[u]={},this[h]=!0,this[s](e),this[c]={},this[f]={},this[o].levels)this[a](t),this[y](t)}get level(){return this[o].level}set level(e){if(!this[o].levels.hasOwnProperty(e))throw new Error("The level option must be a valid key in the levels object.");this.hasOwnProperty(o)||(this[o]=Object.assign({},this[o])),this[o].level=e}get levels(){return this[o].levels}addLevel(e){for(const t in e)this[t]||(this[o].levels[t]=e[t],this[a](t),this[y](t))}get write(){return this[o].write}[s](e){if(e)for(const t in e)if(i.hasOwnProperty(t)){if("level"===t){this.level=e[t];continue}"stringifyFunction"===t&&(this[h]=!1),this[o][t]=e[t]}else{const n=typeof e[t];"string"==n?(this[l]+='"'+t+'":"'+e[t]+'",',this[u][t]=e[t]):"number"==n||"boolean"==n?(this[l]+='"'+t+'":'+e[t]+",",this[u][t]=e[t]):"undefined"==n?(this[l]+='"'+t+'":null,',this[u][t]=null):(this[l]+='"'+t+'":'+this[o].stringifyFunction(e[t])+",",this[u][t]=e[t],this[h]=!1)}}[a](e){if(this[c][e]="{",this[o].levelKeyEnabled&&(this[c][e]+='"'+this[o].levelKey+'":"'+e+'",'),this[o].levelNumberKeyEnabled&&(this[c][e]+='"'+this[o].levelNumberKey+'":'+this[o].levels[e]+","),""!==this[l]&&(this[c][e]+=this[l]),this[c][e]+='"'+this[o].dateTimeKey+'":',this[o].passThrough){const t={};this[o].levelKeyEnabled&&(t[this[o].levelKey]=e),this[o].levelNumberKeyEnabled&&(t[this[o].levelNumberKey]=this[o].levels[e]),this[f][e]=r(t,this[u])}}[y](e){this[e]=function(...t){if(this[o].levels[this[o].level]>this[o].levels[e])return;const n=this[o].dateTimeFunction();let i="",s=null,l="null",u=!1;const h=e=>{if(!this[o].serializers)return e;if(null==e)return null;const t={};for(const n in e){let i=e[n];e.hasOwnProperty&&e.hasOwnProperty(n)&&this[o].serializers[n]&&(i=this[o].serializers[n](i)),void 0!==i&&(t[n]=i)}return t};if(1===t.length){const e=t[0],n=typeof e;"string"==n?i=e:null==e||("number"==n||"boolean"==n?(s=e,l=""+e):e instanceof Error?(u=!0,i=e.message,s=this[o].serializeErrorFunction(e),l=this[o].stringifyFunction(s)):(s=h(e),l=this[o].stringifyFunction(s)))}else if(1<t.length){s=[];for(const e of t){const t=typeof e;"string"!=t?"undefined"!=t?e instanceof Error?(u=!0,s.push(this[o].serializeErrorFunction(e)),i||(i=e.message)):s.push(h(e)):s.push(null):i?s.push(e):i=e}1===s.length&&(s=s[0]),l=this[o].stringifyFunction(s)}let a=this[c][e]+n+',"'+this[o].messageKey+'":"'+i+'","'+this[o].dataKey+'":'+l;if(u&&(a+=',"error":true'),a+="}\n",this[o].passThrough){const t=r({},this[f][e],{[this[o].dateTimeKey]:n,[this[o].messageKey]:i,[this[o].dataKey]:s});u&&(t.error=!0),this[o].write(a,t)}else this[o].write(a)}}child(e){if(null==e||e.constructor!==Object)throw new Error("Provide top level arguments object to create a child logger.");const t=Object.create(this);if(this[h])for(const e in t[u]={},t[h]=!0,this[u])t[u][e]=this[u][e];else t[u]=r({},this[u]),t[h]=!1;for(const n in e){if(i.hasOwnProperty(n)||this[o].levelKey===n||this[o].levelNumberKey===n||this[o].dateTimeKey===n||this[o].messageKey===n||this[o].dataKey===n)continue;const r=typeof e[n];"string"==r&&this[u].hasOwnProperty(n)&&"string"==typeof this[u][n]?t[u][n]=this[u][n]+this[o].separatorString+e[n]:"undefined"==r?t[u][n]=null:(t[u][n]=e[n],"string"!=r&&"number"!=r&&"boolean"!=r&&(this[h]=!1))}for(const e in t[l]="",t[u])if(t[h]){const n=typeof t[u][e];t[l]+="string"==n?'"'+e+'":"'+t[u][e]+'",':'"'+e+'":'+t[u][e]+","}else t[l]+='"'+e+'":'+this[o].stringifyFunction(t[u][e])+",";for(const e in t.parent=this,t[c]={},t[f]={},this[o].levels)t[a](e);return t}stringify(e,t,n){return this[o].stringifyFunction(e,t,n)}json(e){console.log(this[o].stringifyFunction(e,null,2))}}},function(e,t,n){const i=n(0);e.exports={levels:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},level:"info",levelKey:"level",levelKeyEnabled:!0,levelNumberKey:"lvl",levelNumberKeyEnabled:!0,dateTimeKey:"time",dateTimeFunction:function(){return Date.now()},messageKey:"msg",dataKey:"data",separatorString:":",serializers:!1,serializeErrorFunction:function(e){return i({},e)},stringifyFunction:function e(t,n,r){if(null==t)return null;const s=typeof t;if("string"==s)return JSON.stringify(t,n,r);if("number"==s||"boolean"==s)return t;if(Array.isArray(t)){let n="[";const i=t.length-1;for(let r=0;r<t.length;r++)n+=e(t[r]),r<i&&(n+=",");return n+"]"}return JSON.stringify(i({},t),n,r)},passThrough:!1,write:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?process.stdout.write.bind(process.stdout):console.log}}])});