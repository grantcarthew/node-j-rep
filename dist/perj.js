!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.perj=t():e.perj=t()}("undefined"==typeof self?this:self,function(){return function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(s,n,function(t){return e[t]}.bind(null,n));return s},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e){e.exports=Object.freeze({epoch:()=>Date.now(),unix:()=>Math.round(Date.now()/1e3),iso:()=>'"'+(new Date).toISOString()+'"'})},function(e){e.exports=function(e,i,s){!function e(i,s,n,r){let o;if("object"==typeof i&&null!==i){for(o=0;o<n.length;o++)if(n[o]===i)return r[s]="[Circular]",void t.push([r,s,i]);if(n.push(i),Array.isArray(i))for(o=0;o<i.length;o++)e(i[o],o,n,i);else{const t=Object.keys(i);for(o=0;o<t.length;o++){const s=t[o];e(i[s],s,n,i)}}n.pop()}}(e,"",[],void 0);const n=JSON.stringify(e,i,s);for(;0!==t.length;){const e=t.pop();e[0][e[1]]=e[2]}return n};const t=[]},function(e){function t(e){return null==e?null:Object.getPrototypeOf(Object(e))}e.exports=function(e){const i=[];for(let s=t(e);s;)i.push(s),s=t(s);return i}},function(e,t,i){const s=i(2);e.exports=function(e={}){const t=s(e).filter(e=>e!==Object.prototype);return[e].concat(t).map(e=>Object.getOwnPropertyNames(e)).reduce((t,i)=>(i.forEach(i=>{t[i]=e[i]}),t),{})}},function(e,t,i){const s=i(3),n=i(1),r=i(0).epoch;e.exports={levels:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},level:"info",levelKey:"level",levelKeyEnabled:!0,levelNumberKey:"lvl",levelNumberKeyEnabled:!0,dateTimeKey:"time",dateTimeFunction:r,messageKey:"msg",dataKey:"data",separatorString:":",serializers:!1,serializeErrorFunction:s,stringifyFunction:n,passThrough:!1,write:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?process.stdout.write.bind(process.stdout):console.log}},function(e,t,i){const s=i(4),n=i(0),r=Symbol("SplitOptions"),o=Symbol("Options"),l=Symbol("TopSnip"),h=Symbol("TopValues"),u=Symbol("TopIsPrimitive"),c=Symbol("HeaderStrings"),f=Symbol("HeaderValues"),a=Symbol("SetLevelHeader"),p=Symbol("SetLevelFunction");e.exports=Object.freeze({Perj:class{constructor(e){for(const t in this[o]=Object.assign({},s),this[l]="",this[h]={},this[u]=!0,this[r](e),this[c]={},this[f]={},this[o].levels)this[a](t),this[p](t)}get level(){return this[o].level}set level(e){if(!this[o].levels.hasOwnProperty(e))throw new Error("The level option must be a valid key in the levels object.");this.hasOwnProperty(o)||(this[o]=Object.assign({},this[o])),this[o].level=e}get levels(){return this[o].levels}addLevel(e){for(const t in e)this[t]||(this[o].levels[t]=e[t],this[a](t),this[p](t))}get write(){return this[o].write}[r](e){if(e)for(const t in e)if(s.hasOwnProperty(t)){if("level"===t){this.level=e[t];continue}"stringifyFunction"===t&&(this[u]=!1),this[o][t]=e[t]}else{const i=typeof e[t];"string"==i?(this[l]+='"'+t+'":"'+e[t]+'",',this[h][t]=e[t]):"number"==i||"boolean"==i?(this[l]+='"'+t+'":'+e[t]+",",this[h][t]=e[t]):"undefined"==i?(this[l]+='"'+t+'":null,',this[h][t]=null):(this[l]+='"'+t+'":'+this[o].stringifyFunction(e[t])+",",this[h][t]=e[t],this[u]=!1)}}[a](e){if(this[c][e]="{",this[o].levelKeyEnabled&&(this[c][e]+='"'+this[o].levelKey+'":"'+e+'",'),this[o].levelNumberKeyEnabled&&(this[c][e]+='"'+this[o].levelNumberKey+'":'+this[o].levels[e]+","),""!==this[l]&&(this[c][e]+=this[l]),this[c][e]+='"'+this[o].dateTimeKey+'":',this[o].passThrough){const t={};this[o].levelKeyEnabled&&(t[this[o].levelKey]=e),this[o].levelNumberKeyEnabled&&(t[this[o].levelNumberKey]=this[o].levels[e]),this[f][e]=Object.assign(t,this[h])}}[p](e){this[e]=function(...t){if(this[o].levels[this[o].level]>this[o].levels[e])return;const i=this[o].dateTimeFunction();let s="",n="",r='""';const l=e=>{if(!this[o].serializers)return e;if(null==e)return null;const t={};for(const i in e){let s=e[i];e.hasOwnProperty&&e.hasOwnProperty(i)&&this[o].serializers[i]&&(s=this[o].serializers[i](s)),void 0!==s&&(t[i]=s)}return t};if(1===t.length){const e=t[0];"string"==typeof e?(s=e,n=""):e instanceof Error?(s=e.message,n=this[o].serializeErrorFunction(e),r=this[o].stringifyFunction(n)):void 0===e?n=r=null:(n=l(e),r=this[o].stringifyFunction(n))}else if(1<t.length){n=[];for(const e of t){const t=typeof e;"string"!=t?"undefined"!=t?e instanceof Error?(n.push(this[o].serializeErrorFunction(e)),s||(s=e.message)):n.push(l(e)):n.push(null):s?n.push(e):s=e}1===n.length&&(n=n[0]),r=this[o].stringifyFunction(n)}const h=this[c][e]+i+',"'+this[o].messageKey+'":"'+s+'","'+this[o].dataKey+'":'+r+"}\n";if(this[o].passThrough){const t=Object.assign(this[f][e],{[this[o].dateTimeKey]:i,[this[o].messageKey]:s,[this[o].dataKey]:n});this[o].write(h,t)}else this[o].write(h)}}child(e){if(!e)throw new Error("Provide top level arguments to create a child logger.");const t=Object.create(this);if(this[u])for(const e in t[h]={},t[u]=!0,this[h])t[h][e]=this[h][e];else t[h]=Object.assign({},this[h]),t[u]=!1;for(const i in e){if(s.hasOwnProperty(i)||this[o].levelKey===i||this[o].levelNumberKey===i||this[o].dateTimeKey===i||this[o].messageKey===i||this[o].dataKey===i)continue;const n=typeof e[i];"string"==n&&this[h].hasOwnProperty(i)&&"string"==typeof this[h][i]?t[h][i]=this[h][i]+this[o].separatorString+e[i]:"undefined"==n?t[h][i]=null:(t[h][i]=e[i],"string"!=n&&"number"!=n&&"boolean"!=n&&(this[u]=!1))}for(const e in t[l]="",t[h])if(t[u]){const i=typeof t[h][e];t[l]+="string"==i?'"'+e+'":"'+t[h][e]+'",':'"'+e+'":'+t[h][e]+","}else t[l]+='"'+e+'":'+this[o].stringifyFunction(t[h][e])+",";for(const e in t.parent=this,t[c]={},t[f]={},this[o].levels)t[a](e);return t}stringify(e,t,i){return this[o].stringifyFunction(e,t,i)}json(e){console.log(this[o].stringifyFunction(e,null,2))}},dateTimeFunctions:n})}])});